OSPF Explained — How It Works, Step by Step
=============================================

This document is written so that if you read it from start to finish,
they will clearly understand WHAT OSPF is, HOW it works internally,
and WHY it behaves the way it does in real networks.


-------------------------------------------------
1. What OSPF Really Is
-------------------------------------------------
OSPF (Open Shortest Path First) is a link-state routing protocol
used to route traffic inside a single autonomous system.

At its core, OSPF answers this question:
“What does the entire network look like, and what is the shortest path through it?”

Unlike distance-vector protocols, OSPF does not rely on rumors from neighbors.
It builds a map of the network and calculates paths itself.

-------------------------------------------------
2. The Big Picture: How OSPF Operates
-------------------------------------------------
OSPF works in four continuous stages:

1. Discover neighbors
2. Exchange topology information
3. Build a full network map
4. Calculate shortest paths

Every OSPF router follows the same logic.
That shared understanding is what keeps the network stable.

-------------------------------------------------
3. Neighbor Discovery (How Routers Meet)
-------------------------------------------------
OSPF routers discover each other using Hello packets.

Hello packets are used to:
- Discover neighbors
- Maintain neighbor relationships
- Elect DR and BDR (on multi-access networks)

For two routers to become neighbors, they must match:
- Area ID
- Hello and Dead timers
- Network type
- Authentication (if configured)

If these values do not match, adjacency will fail.

-------------------------------------------------
4. From Neighbors to Adjacency
-------------------------------------------------
Not all neighbors become full adjacencies.

OSPF forms full adjacencies when routers need to exchange topology data.
On multi-access networks:
- One router becomes the Designated Router (DR)
- One becomes the Backup Designated Router (BDR)

This reduces unnecessary flooding and keeps OSPF scalable.

-------------------------------------------------
5. Link-State Advertisements (LSAs)
-------------------------------------------------
OSPF describes the network using LSAs.

An LSA is a detailed description of:
- A router
- Its interfaces
- Its connected networks
- The cost to reach them

Routers flood LSAs within an area.
Every router in the area receives the same information.

-------------------------------------------------
6. The LSDB (Link-State Database)
-------------------------------------------------
All LSAs are stored in the LSDB.

Important rule:
All routers in the same OSPF area must have identical LSDBs.

Think of the LSDB as a shared map.
If the maps differ, routing problems follow.

-------------------------------------------------
7. SPF Algorithm (The Brain of OSPF)
-------------------------------------------------
OSPF uses the SPF (Shortest Path First) algorithm, also called Dijkstra’s algorithm.

SPF:
- Takes the LSDB
- Calculates the shortest path tree
- Selects the best path to every destination

Lower cost = better path.

SPF is CPU-intensive, which is why OSPF uses areas.

-------------------------------------------------
8. OSPF Metric (Cost)
-------------------------------------------------
OSPF uses a single metric: Cost.

Cost is usually calculated as:
Reference Bandwidth / Interface Bandwidth

By default, reference bandwidth is 100 Mbps.
This default is outdated and should be adjusted in modern networks.

Lower cost paths are preferred.

-------------------------------------------------
9. Areas and Scalability
-------------------------------------------------
OSPF scales using areas.

Area 0 (Backbone Area):
- Central area
- All other areas must connect to it

Non-backbone Areas:
- Reduce SPF calculations
- Limit LSA flooding

This is how OSPF avoids overwhelming routers.

-------------------------------------------------
10. What Happens When a Link Fails
-------------------------------------------------
When a link goes down:
- A new LSA is generated
- LSAs are flooded through the area
- SPF is recalculated
- Routing table is updated

This takes longer than EIGRP,
but the network remains loop-free and consistent.

-------------------------------------------------
11. OSPF Tables (How Data Is Organized)
-------------------------------------------------
Neighbor Table:
Who are my neighbors?

LSDB:
What does the network look like?

Routing Table:
Which paths should I use?

-------------------------------------------------
12. OSPF for IPv6
-------------------------------------------------
OSPFv3 is used for IPv6.

Conceptually:
- Same logic
- Same SPF algorithm
- Same area design

Differences:
- Uses link-local addresses
- Configuration is interface-based

-------------------------------------------------
13. Why OSPF Is Reliable
-------------------------------------------------
OSPF is reliable because:
- All routers share the same topology view
- Routing decisions are deterministic
- Loops are mathematically avoided

This makes OSPF ideal for multi-vendor networks.

-------------------------------------------------
14. Final Mental Model (How to Think About OSPF)
-------------------------------------------------
Think of OSPF as:
A protocol where every router draws the same map,
then independently finds the shortest path.

If the map changes, everyone redraws it.

Understand LSAs, LSDB, SPF, and areas,
and OSPF stops being complicated.

-------------------------------------------------
End of File
-------------------------------------------------
